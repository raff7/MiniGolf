(function(){var e=function(e,n){function r(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return r.prototype=n.prototype,e.prototype=new r,e.__super__=n.prototype,e},t={}.hasOwnProperty;define(["external/underscore","modules/clean/flux/flux_store","modules/clean/react/pass/constants","modules/clean/react/pass/dispatcher"],function(t,n,r,s){var a,i;return a=r.ActionTypes,new(i=function(n){function r(e){r.__super__.constructor.call(this,e),this._seenStates={},this._presence={}}return e(r,n),r.prototype.presence=function(e,t){var n;return n=this._makeServerPath(e,t),n in this._presence?this._presence[n]:null},r.prototype.seenStates=function(e,t){var n;return n=this._makeServerPath(e,t),n in this._seenStates?this._seenStates[n]:null},r.prototype._makeServerPath=function(e,t){return e+":"+t},r.prototype._receivePresenceData=function(e,n,r,s){var a;return a=t.difference(this._presence[this._makeServerPath(e,n)],s),a=t.union(a,r),this._presence[this._makeServerPath(e,n)]=a,this.__emitChange()},r.prototype._updateSeenStates=function(e,t,n){return this._seenStates[this._makeServerPath(e,t)]=n,this.__emitChange()},r.prototype.__onDispatch=function(e){var t;switch(t=e.action.data,e.action.type){case a.RECEIVE_PRESENCE_DATA:return this._receivePresenceData(t.nsId,t.nsPath,t.onlineUsers,t.offlineUsers);case a.UPDATE_SEEN_STATES:return this._updateSeenStates(t.nsId,t.nsPath,t.seenStates)}},r}(n))(s)})}).call(this);